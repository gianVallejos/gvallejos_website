function InitMap(){var e=new google.maps.LatLng(wpgmaps_localize[wpgmaps_mapid].map_start_lat,wpgmaps_localize[wpgmaps_mapid].map_start_lng);"undefined"!=typeof wpgmza_override_zoom?MYMAP.init("#wpgmza_map",e,parseInt(wpgmza_override_zoom)):MYMAP.init("#wpgmza_map",e,parseInt(wpgmaps_localize[wpgmaps_mapid].map_start_zoom)),UniqueCode=Math.round(1e4*Math.random()),MYMAP.placeMarkers(wpgmaps_markerurl+"?u="+UniqueCode,wpgmaps_localize[wpgmaps_mapid].id,null,null,null)}function add_polygon(e){var a=wpgmaps_localize_polygon_settings[e],t=a.polydata,o=new Array;for(tmp_entry2 in t)"undefined"!=typeof t[tmp_entry2][0]&&o.push(new google.maps.LatLng(t[tmp_entry2][0],t[tmp_entry2][1]));(null===a.lineopacity||""===a.lineopacity)&&(a.lineopacity=1);var p=new google.maps.LatLngBounds;for(i=0;i<o.length;i++)p.extend(o[i]);WPGM_Path_Polygon[e]=new google.maps.Polygon({path:o,clickable:!0,strokeColor:"#"+a.linecolor,fillOpacity:a.opacity,strokeOpacity:a.lineopacity,fillColor:"#"+a.fillcolor,strokeWeight:2,map:MYMAP.map}),WPGM_Path_Polygon[e].setMap(MYMAP.map),polygon_center=p.getCenter(),""!==a.title&&(infoWindow_poly[e]=new google.maps.InfoWindow,google.maps.event.addListener(WPGM_Path_Polygon[e],"click",function(t){if(infoWindow_poly[e].setPosition(t.latLng),o="",""!==a.link)var o="<a href='"+a.link+"'>"+a.title+"</a>";else var o=a.title;wpgmaps_localize_global_settings.wpgmza_settings_disable_infowindows||(infoWindow_poly[e].setContent(o),infoWindow_poly[e].open(MYMAP.map,this.position))}))}function add_polyline(e){var a=wpgmaps_localize_polyline_settings[e],t=a.polydata,o=new Array;for(tmp_entry2 in t)if("undefined"!=typeof t[tmp_entry2][0]&&"undefined"!=typeof t[tmp_entry2][1]){var p=t[tmp_entry2][0].replace(")","");p=p.replace("(","");var i=t[tmp_entry2][1].replace(")","");i=i.replace("(",""),o.push(new google.maps.LatLng(p,i))}(null===a.lineopacity||""===a.lineopacity)&&(a.lineopacity=1),WPGM_Path[e]=new google.maps.Polyline({path:o,strokeColor:"#"+a.linecolor,strokeOpacity:a.opacity,strokeWeight:a.linethickness,map:MYMAP.map}),WPGM_Path[e].setMap(MYMAP.map)}function fillInAddress(){autocomplete.getPlace()}function searchLocations(e){var a=document.getElementById("addressInput").value,t=new google.maps.Geocoder;"undefined"==typeof wpgmaps_localize[wpgmaps_mapid].other_settings.wpgmza_store_locator_restrict||""===wpgmaps_localize[wpgmaps_mapid].other_settings.wpgmza_store_locator_restrict?t.geocode({address:a},function(t,o){o===google.maps.GeocoderStatus.OK?searchLocationsNear(e,t[0].geometry.location):alert(a+" not found")}):t.geocode({address:a,componentRestrictions:{country:wpgmaps_localize[wpgmaps_mapid].other_settings.wpgmza_store_locator_restrict}},function(t,o){o===google.maps.GeocoderStatus.OK?searchLocationsNear(e,t[0].geometry.location):alert(a+" not found")})}function clearLocations(){infoWindow.close()}function searchLocationsNear(e,a){clearLocations();var t=document.getElementById("wpgmza_distance_type").value,o=document.getElementById("radiusSelect").value;"1"===t?"1"===o?zoomie=14:"5"===o?zoomie=12:"10"===o?zoomie=11:"25"===o?zoomie=9:"50"===o?zoomie=8:"75"===o?zoomie=8:"100"===o?zoomie=7:"150"===o?zoomie=7:"200"===o?zoomie=6:"300"===o?zoomie=6:zoomie=14:"1"===o?zoomie=14:"5"===o?zoomie=12:"10"===o?zoomie=11:"25"===o?zoomie=10:"50"===o?zoomie=9:"75"===o?zoomie=8:"100"===o?zoomie=8:"150"===o?zoomie=7:"200"===o?zoomie=7:"300"===o?zoomie=6:zoomie=14,MYMAP.init("#wpgmza_map",a,zoomie,3),MYMAP.placeMarkers(wpgmaps_markerurl+"?u="+UniqueCode,wpgmaps_localize[wpgmaps_mapid].id,o,a,t)}function toRad(e){return e*Math.PI/180}var WPGM_Path_Polygon=new Array,WPGM_Path=new Array,infoWindow_poly=Array();for(var entry in wpgmaps_localize)"undefined"==typeof window.jQuery&&setTimeout(function(){document.getElementById("wpgmza_map").innerHTML='Error: In order for WP Google Maps to work, jQuery must be installed. A check was done and jQuery was not present. Please see the <a href="http://www.wpgmaps.com/documentation/troubleshooting/jquery-troubleshooting/" title="WP Google Maps - jQuery Troubleshooting">jQuery troubleshooting section of our site</a> for more information.'},5e3);jQuery(function(){jQuery(document).ready(function(){if(/1\.([0-7])\.([0-9])/.test(jQuery.fn.jquery))setTimeout(function(){document.getElementById("wpgmza_map").innerHTML="Error: Your version of jQuery is outdated. WP Google Maps requires jQuery version 1.7+ to function correctly. Go to Maps->Settings and check the box that allows you to over-ride your current jQuery to try eliminate this problem."},6e3);else{var e,a="#wpgmza_map",t=jQuery(a),o=wpgmaps_localize[wpgmaps_mapid].map_width+wpgmaps_localize[wpgmaps_mapid].map_width_type,p=wpgmaps_localize[wpgmaps_mapid].map_height+wpgmaps_localize[wpgmaps_mapid].map_height_type;"inherit"!=(e=t.attr("data-shortcode-width"))&&(o=e),"inherit"!=(e=t.attr("data-shortcode-height"))&&(p=e),t.css({width:o,height:p}),InitMap(),jQuery("body").on("tabsactivate",function(){setTimeout(function(){InitMap()},500)}),jQuery("body").on("tabsshow",function(){setTimeout(function(){InitMap()},500)}),jQuery("body").on("accordionactivate",function(){setTimeout(function(){InitMap()},500)}),jQuery("body").on("click",".wpb_tabs_nav li",function(){setTimeout(function(){InitMap()},500)}),jQuery("body").on("click",".ui-tabs-nav li",function(e,a){InitMap()}),jQuery("body").on("click",".tp-tabs li a",function(e,a){InitMap()}),jQuery("body").on("click",".nav-tabs li a",function(e,a){InitMap()}),jQuery("body").on("click",".vc_tta-panel-heading",function(){setTimeout(function(){InitMap()},500)}),jQuery("body").on("click",".ult_exp_section",function(){setTimeout(function(){InitMap()},500)}),jQuery("body").on("click",".x-accordion-heading",function(){setTimeout(function(){InitMap()},500)}),jQuery("body").on("click",".x-nav-tabs li",function(){setTimeout(function(){InitMap()},500)}),jQuery("body").on("click",".tab-title",function(){setTimeout(function(){InitMap()},500)}),jQuery("body").on("click",".tab-link",function(){setTimeout(function(){InitMap()},500)}),jQuery("body").on("click",".et_pb_tabs_controls li",function(){setTimeout(function(){InitMap()},500)}),jQuery("body").on("click",".fusion-tab-heading",function(){setTimeout(function(){InitMap()},500)}),jQuery("body").on("click",".et_pb_tab",function(){setTimeout(function(){InitMap()},500)}),jQuery("body").on("click",".tri-tabs-nav span",function(){setTimeout(function(){InitMap()},500)}),jQuery("body").on("click",".gdl-tabs li",function(){setTimeout(function(){InitMap()},500)}),jQuery("body").on("click","#tabnav  li",function(){setTimeout(function(){InitMap()},500)})}})});var MYMAP={map:null,bounds:null};""===wpgmaps_localize_global_settings.wpgmza_settings_map_draggable||"undefined"==typeof wpgmaps_localize_global_settings.wpgmza_settings_map_draggable?wpgmza_settings_map_draggable=!0:wpgmza_settings_map_draggable=!1,""===wpgmaps_localize_global_settings.wpgmza_settings_map_clickzoom||"undefined"==typeof wpgmaps_localize_global_settings.wpgmza_settings_map_clickzoom?wpgmza_settings_map_clickzoom=!1:wpgmza_settings_map_clickzoom=!0,""===wpgmaps_localize_global_settings.wpgmza_settings_map_scroll||"undefined"==typeof wpgmaps_localize_global_settings.wpgmza_settings_map_scroll?wpgmza_settings_map_scroll=!0:wpgmza_settings_map_scroll=!1,""===wpgmaps_localize_global_settings.wpgmza_settings_map_zoom||"undefined"==typeof wpgmaps_localize_global_settings.wpgmza_settings_map_zoom?wpgmza_settings_map_zoom=!0:wpgmza_settings_map_zoom=!1,""===wpgmaps_localize_global_settings.wpgmza_settings_map_pan||"undefined"==typeof wpgmaps_localize_global_settings.wpgmza_settings_map_pan?wpgmza_settings_map_pan=!0:wpgmza_settings_map_pan=!1,""===wpgmaps_localize_global_settings.wpgmza_settings_map_type||"undefined"==typeof wpgmaps_localize_global_settings.wpgmza_settings_map_type?wpgmza_settings_map_type=!0:wpgmza_settings_map_type=!1,""===wpgmaps_localize_global_settings.wpgmza_settings_map_streetview||"undefined"==typeof wpgmaps_localize_global_settings.wpgmza_settings_map_streetview?wpgmza_settings_map_streetview=!0:wpgmza_settings_map_streetview=!1,""===wpgmaps_localize_global_settings.wpgmza_settings_map_full_screen_control||"undefined"==typeof wpgmaps_localize_global_settings.wpgmza_settings_map_full_screen_control?wpgmza_settings_map_full_screen_control=!0:wpgmza_settings_map_full_screen_control=!1,"undefined"==typeof wpgmaps_localize[wpgmaps_mapid].other_settings.map_max_zoom||""===wpgmaps_localize[wpgmaps_mapid].other_settings.map_max_zoom?wpgmza_max_zoom=0:wpgmza_max_zoom=parseInt(wpgmaps_localize[wpgmaps_mapid].other_settings.map_max_zoom),"undefined"==typeof wpgmaps_localize[wpgmaps_mapid].other_settings.map_min_zoom||""===wpgmaps_localize[wpgmaps_mapid].other_settings.map_min_zoom?wpgmza_min_zoom=21:wpgmza_min_zoom=parseInt(wpgmaps_localize[wpgmaps_mapid].other_settings.map_min_zoom),MYMAP.init=function(e,a,t){"undefined"!=typeof wpgmaps_localize[wpgmaps_mapid].type?"1"===wpgmaps_localize[wpgmaps_mapid].type?maptype=google.maps.MapTypeId.ROADMAP:"2"===wpgmaps_localize[wpgmaps_mapid].type?maptype=google.maps.MapTypeId.SATELLITE:"3"===wpgmaps_localize[wpgmaps_mapid].type?maptype=google.maps.MapTypeId.HYBRID:"4"===wpgmaps_localize[wpgmaps_mapid].type?maptype=google.maps.MapTypeId.TERRAIN:maptype=google.maps.MapTypeId.ROADMAP:maptype=google.maps.MapTypeId.ROADMAP;var o={zoom:t,minZoom:wpgmza_max_zoom,maxZoom:wpgmza_min_zoom,center:a,zoomControl:wpgmza_settings_map_zoom,panControl:wpgmza_settings_map_pan,mapTypeControl:wpgmza_settings_map_type,streetViewControl:wpgmza_settings_map_streetview,draggable:wpgmza_settings_map_draggable,disableDoubleClickZoom:wpgmza_settings_map_clickzoom,scrollwheel:wpgmza_settings_map_scroll,fullscreenControl:wpgmza_settings_map_full_screen_control,mapTypeId:maptype};if("undefined"!=typeof wpgmza_force_greedy_gestures&&(o.gestureHandling=wpgmza_force_greedy_gestures),"undefined"!=typeof wpgmaps_localize[wpgmaps_mapid].other_settings.wpgmza_theme_data&&wpgmaps_localize[wpgmaps_mapid].other_settings.wpgmza_theme_data!==!1&&""!==wpgmaps_localize[wpgmaps_mapid].other_settings.wpgmza_theme_data&&(o.styles||(o.styles=[]),wpgmza_theme_data=jQuery.parseJSON(wpgmaps_localize[wpgmaps_mapid].other_settings.wpgmza_theme_data),o.styles=o.styles.concat(jQuery.parseJSON(wpgmaps_localize[wpgmaps_mapid].other_settings.wpgmza_theme_data))),wpgmaps_localize[wpgmaps_mapid].other_settings.wpgmza_show_points_of_interest||(o.styles||(o.styles=[]),o.styles.push({featureType:"poi",stylers:[{visibility:"off"}]})),this.map=new google.maps.Map(jQuery(e)[0],o),this.bounds=new google.maps.LatLngBounds,jQuery("#wpgmza_map").trigger("wpgooglemaps_loaded"),null!==wpgmaps_localize_polygon_settings&&"undefined"!=typeof wpgmaps_localize_polygon_settings)for(var p in wpgmaps_localize_polygon_settings)add_polygon(p);if(null!==wpgmaps_localize_polyline_settings&&"undefined"!=typeof wpgmaps_localize_polyline_settings)for(var p in wpgmaps_localize_polyline_settings)add_polyline(p);if("1"===wpgmaps_localize[wpgmaps_mapid].bicycle){var i=new google.maps.BicyclingLayer;i.setMap(MYMAP.map)}if("1"===wpgmaps_localize[wpgmaps_mapid].traffic){var n=new google.maps.TrafficLayer;n.setMap(MYMAP.map)}if("undefined"!=typeof wpgmaps_localize[wpgmaps_mapid].other_settings.transport_layer&&1===wpgmaps_localize[wpgmaps_mapid].other_settings.transport_layer){var s=new google.maps.TransitLayer;s.setMap(MYMAP.map)}google.maps.event.addListener(MYMAP.map,"click",function(){infoWindow.close()}),window.addEventListener("keydown",function(e){var a=e.which?e.which:e.keyCode;27==a&&infoWindow.close()})};var infoWindow=new google.maps.InfoWindow;"undefined"!=typeof wpgmaps_localize_global_settings.wpgmza_settings_infowindow_width&&""!==wpgmaps_localize_global_settings.wpgmza_settings_infowindow_width&&infoWindow.setOptions({maxWidth:wpgmaps_localize_global_settings.wpgmza_settings_infowindow_width}),google.maps.event.addDomListener(window,"resize",function(){var e=new google.maps.LatLng(wpgmaps_localize[wpgmaps_mapid].map_start_lat,wpgmaps_localize[wpgmaps_mapid].map_start_lng);MYMAP.map.setCenter(e)}),MYMAP.placeMarkers=function(e,a,t,o,p){var i=0,n=jQuery(".js-not-found-msg");if("1"===wpgmaps_localize_global_settings.wpgmza_settings_marker_pull)jQuery.get(e,function(e){jQuery(e).find("marker").each(function(){var e=jQuery(this).find("map_id").text();if(e==a){var n=jQuery(this).find("address").text(),s=jQuery(this).find("lat").text(),l=jQuery(this).find("lng").text(),m=jQuery(this).find("anim").text(),g=jQuery(this).find("infoopen").text(),_=jQuery(this).find("lat").text(),r=jQuery(this).find("lng").text(),c=!0;if(null!==t){if(i>0);else{var d=new google.maps.LatLng(parseFloat(o.lat()),parseFloat(o.lng()));if(MYMAP.bounds.extend(d),"undefined"==typeof wpgmaps_localize[wpgmaps_mapid].other_settings.store_locator_bounce||1===wpgmaps_localize[wpgmaps_mapid].other_settings.store_locator_bounce)var w=new google.maps.Marker({position:d,map:MYMAP.map,animation:google.maps.Animation.BOUNCE});if("1"===p)var u={strokeColor:"#FF0000",strokeOpacity:.25,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.15,map:MYMAP.map,center:d,radius:parseInt(t/621371e-9)};else var u={strokeColor:"#FF0000",strokeOpacity:.25,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.15,map:MYMAP.map,center:d,radius:parseInt(t/.001)};cityCircle=new google.maps.Circle(u),i+=1}var y=0;y="1"===p?3958.7558657440545:6378.16;var f=toRad(o.lat()-_),z=toRad(o.lng()-r),M=Math.sin(f/2)*Math.sin(f/2)+Math.cos(toRad(_))*Math.cos(toRad(o.lat()))*Math.sin(z/2)*Math.sin(z/2),h=2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M)),b=y*h;c=t>b?!0:!1}var d=new google.maps.LatLng(parseFloat(s),parseFloat(l));if(MYMAP.bounds.extend(d),c===!0){if("1"===m)var w=new google.maps.Marker({position:d,map:MYMAP.map,animation:google.maps.Animation.BOUNCE});else if("2"===m)var w=new google.maps.Marker({position:d,map:MYMAP.map,animation:google.maps.Animation.DROP});else var w=new google.maps.Marker({position:d,map:MYMAP.map});var v="";v=null!==t?"1"===p?"<p style='min-width:100px; display:block;'>"+Math.round(b,2)+" "+wpgmaps_lang_m_away+"</p>":"<p style='min-width:100px; display:block;'>"+Math.round(b,2)+" "+wpgmaps_lang_km_away+"</p>":"";var k="<span style='min-width:100px; display:block;'>"+n+"</span>"+v;"1"!==g||wpgmaps_localize_global_settings.wpgmza_settings_disable_infowindows||(infoWindow.setContent(k),infoWindow.open(MYMAP.map,w)),temp_actiontype="click","undefined"!=typeof wpgmaps_localize_global_settings.wpgmza_settings_map_open_marker_by&&"2"==wpgmaps_localize_global_settings.wpgmza_settings_map_open_marker_by&&(temp_actiontype="mouseover"),google.maps.event.addListener(w,temp_actiontype,function(){infoWindow.close(),wpgmaps_localize_global_settings.wpgmza_settings_disable_infowindows||(infoWindow.setContent(k),infoWindow.open(MYMAP.map,w))})}}})});else if(Object.keys(wpgmaps_localize_marker_data).length>0){var s=0;"undefined"!=typeof wpgmaps_localize_marker_data&&(jQuery.each(wpgmaps_localize_marker_data,function(e,n){var l=n.map_id;if(l==a){var m=n.address,g=n.anim,_=n.infoopen,r=n.lat,c=n.lng,d=new google.maps.LatLng(parseFloat(r),parseFloat(c)),w=n.lat,u=n.lng,y=!0;if(null!==t){if(i>0);else{var d=new google.maps.LatLng(parseFloat(o.lat()),parseFloat(o.lng()));if(MYMAP.bounds.extend(d),"undefined"==typeof wpgmaps_localize[wpgmaps_mapid].other_settings.store_locator_bounce||1===wpgmaps_localize[wpgmaps_mapid].other_settings.store_locator_bounce)var f=new google.maps.Marker({position:d,map:MYMAP.map,animation:google.maps.Animation.BOUNCE});if("1"===p)var z={strokeColor:"#FF0000",strokeOpacity:.25,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.15,map:MYMAP.map,center:d,radius:parseInt(t/621371e-9)};else var z={strokeColor:"#FF0000",strokeOpacity:.25,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.15,map:MYMAP.map,center:d,radius:parseInt(t/.001)};cityCircle=new google.maps.Circle(z),i+=1}var M=0;M="1"===p?3958.7558657440545:6378.16;var h=toRad(o.lat()-w),b=toRad(o.lng()-u),v=Math.sin(h/2)*Math.sin(h/2)+Math.cos(toRad(w))*Math.cos(toRad(o.lat()))*Math.sin(b/2)*Math.sin(b/2),k=2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v)),P=M*k;t>P?(y=!0,s++):y=!1}var d=new google.maps.LatLng(parseFloat(r),parseFloat(c));if(MYMAP.bounds.extend(d),y===!0){if("1"===g)var f=new google.maps.Marker({position:d,map:MYMAP.map,animation:google.maps.Animation.BOUNCE});else if("2"===g)var f=new google.maps.Marker({position:d,map:MYMAP.map,animation:google.maps.Animation.DROP});else var f=new google.maps.Marker({position:d,map:MYMAP.map});var A="";A=null!==t?"1"===p?"<p style='min-width:100px; display:block;'>"+Math.round(P,2)+" "+wpgmaps_lang_m_away+"</p>":"<p style='min-width:100px; display:block;'>"+Math.round(P,2)+" "+wpgmaps_lang_km_away+"</p>":"";var I="<span style='min-width:100px; display:block;'>"+m+"</span>"+A;"1"!==_||wpgmaps_localize_global_settings.wpgmza_settings_disable_infowindows||(infoWindow.setContent(I),infoWindow.open(MYMAP.map,f)),temp_actiontype="click","undefined"!=typeof wpgmaps_localize_global_settings.wpgmza_settings_map_open_marker_by&&"2"==wpgmaps_localize_global_settings.wpgmza_settings_map_open_marker_by&&(temp_actiontype="mouseover"),google.maps.event.addListener(f,temp_actiontype,function(){infoWindow.close(),wpgmaps_localize_global_settings.wpgmza_settings_disable_infowindows||(infoWindow.setContent(I),infoWindow.open(MYMAP.map,f))})}}}),""!==jQuery("#addressInput").val()&&1>s&&(n.addClass("is-active"),setTimeout(function(){n.removeClass("is-active")},5e3)))}},jQuery("body").on("keypress","#addressInput",function(e){13==e.which&&jQuery(".wpgmza_sl_search_button").trigger("click")});var autocomplete,elementExists=document.getElementById("addressInput");"object"==typeof google&&"object"==typeof google.maps&&"object"==typeof google.maps.places&&"function"==typeof google.maps.places.Autocomplete&&null!==elementExists&&("undefined"==typeof wpgmaps_localize[wpgmaps_mapid].other_settings.wpgmza_store_locator_restrict||""===wpgmaps_localize[wpgmaps_mapid].other_settings.wpgmza_store_locator_restrict?(autocomplete=new google.maps.places.Autocomplete(document.getElementById("addressInput"),{types:["geocode"]}),google.maps.event.addListener(autocomplete,"place_changed",function(){fillInAddress()})):(autocomplete=new google.maps.places.Autocomplete(document.getElementById("addressInput"),{types:["geocode"],componentRestrictions:{country:wpgmaps_localize[wpgmaps_mapid].other_settings.wpgmza_store_locator_restrict}}),google.maps.event.addListener(autocomplete,"place_changed",function(){fillInAddress()})));